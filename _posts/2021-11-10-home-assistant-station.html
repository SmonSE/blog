---
layout: post
title: Super smart Home Assistant touch display station on Pi3
date: 2021-11-10 21:11:55.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Blog
- HomeAssistant
tags:
- 3D Printer
- 5 inch
- Home Assistant
- Kuman LCD Display
- Raspberry Pi 3 Model B
- smart home
meta:
  rank_math_seo_score: '86'
  _edit_last: '1'
  _ez-toc-disabled: ''
  _ez-toc-insert: ''
  _ez-toc-heading-levels: a:0:{}
  _ez-toc-alttext: ''
  _ez-toc-exclude: ''
  rank_math_internal_links_processed: '1'
  rank_math_focus_keyword: Home Assistant
  rank_math_contentai_score: a:5:{s:9:"wordCount";s:3:"100";s:9:"linkCount";s:1:"0";s:12:"headingCount";s:3:"100";s:10:"mediaCount";s:5:"62.22";s:8:"keywords";s:5:"74.51";}
  rank_math_primary_category: '89'
  rank_math_og_content_image: a:2:{s:5:"check";s:32:"30665a4ab17dd1575f98f8f4f271b851";s:6:"images";a:1:{i:0;i:736;}}
author:
  login: smon
  email: simon_eisele@web.de
  display_name: Simon Eisele
  first_name: Simon
  last_name: Eisele
permalink: "/2021/11/10/home-assistant-station/"
---
<p><!-- wp:media-text {"mediaId":736,"mediaLink":"https://affengriff.net/?attachment_id=736","mediaType":"image","mediaWidth":43} --></p>
<div class="wp-block-media-text alignwide is-stacked-on-mobile" style="grid-template-columns:43% auto">
<figure class="wp-block-media-text__media"><img src="{{ site.baseurl }}/assets/2021/11/IMG_8799-768x1024.jpg" alt="Home Assistant station" class="wp-image-736 size-full" /></figure>
<div class="wp-block-media-text__content"><!-- wp:paragraph {"placeholder":"Content…","fontSize":"normal"} --></p>
<p class="has-normal-font-size">In order to make the daily electricity consumption for the family visible, I built a <a href="https://affengriff.net/category/homeassistant/" target="_blank" data-type="URL" data-id="https://affengriff.net/category/homeassistant/" rel="noreferrer noopener">small home assistant </a>monitor. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"placeholder":"Content…","fontSize":"normal"} --></p>
<p class="has-normal-font-size">Since I still had an old Raspberry Pi 3 + Kuman Touch Display brought around, the idea was implemented quickly. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Most of the work on this project was the 3D printer case. I found various housings at thingiverse, but none of them were upright. I redesigned an existing project from Thingiverse for my purposes, but the picture currently only shows a prototype which I am very happy with.</p>
<p><!-- /wp:paragraph --></div>
</div>
<p><!-- /wp:media-text --></p>
<p><!-- wp:heading --></p>
<h2><strong>Hardware required for commissioning</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:list --></p>
<ul>
<li><a href="https://www.amazon.de/Raspberry-Pi-3BPLUS-R-Prozessor-Computer/dp/B07HX37B17/ref=sr_1_6?__mk_de_DE=ÅMÅŽÕÑ&amp;crid=SQ7OAA1N9OAH&amp;keywords=raspberry+pi+3+b%2B&amp;qid=1636547572&amp;qsid=262-3631401-7484166&amp;sprefix=Raspberry+Pi+3+%2Caps%2C180&amp;sr=8-6&amp;sres=B07BFH96M3%2CB09HNPJCF7%2CB07N3QYTFJ%2CB07HX37B17%2CB08L6MLXM7%2CB07BDR5PDW%2CB01CD5VC92%2CB082QN6L1N%2CB00LPESRUK%2CB09HNQFPRK%2CB07ZV9C6QF%2CB09JJVTTFC%2CB082PSBBMM%2CB091LKF3ZT%2CB07ZCZ9Z6J%2CB09HNNP4YQ" target="_blank" data-type="URL" data-id="https://www.amazon.de/Raspberry-Pi-3BPLUS-R-Prozessor-Computer/dp/B07HX37B17/ref=sr_1_6?__mk_de_DE=ÅMÅŽÕÑ&amp;crid=SQ7OAA1N9OAH&amp;keywords=raspberry+pi+3+b%2B&amp;qid=1636547572&amp;qsid=262-3631401-7484166&amp;sprefix=Raspberry+Pi+3+%2Caps%2C180&amp;sr=8-6&amp;sres=B07BFH96M3%2CB09HNPJCF7%2CB07N3QYTFJ%2CB07HX37B17%2CB08L6MLXM7%2CB07BDR5PDW%2CB01CD5VC92%2CB082QN6L1N%2CB00LPESRUK%2CB09HNQFPRK%2CB07ZV9C6QF%2CB09JJVTTFC%2CB082PSBBMM%2CB091LKF3ZT%2CB07ZCZ9Z6J%2CB09HNNP4YQ" rel="noreferrer noopener">Raspberry Pi 3 Model B</a></li>
<li><a href="https://www.amazon.de/Kuman-Resistive-Protective-Touchscreen-Bildschirm/dp/B07M8QFKHK/ref=sr_1_1?adgrpid=69069141257&amp;gclid=Cj0KCQiA-K2MBhC-ARIsAMtLKRtOy-l56cnGXyybLLshoDY-CNH60KyfYNzADLuFdmFIISiI_7-h3bIaAqtsEALw_wcB&amp;hvadid=391628797118&amp;hvdev=c&amp;hvlocphy=9041871&amp;hvnetw=g&amp;hvqmt=e&amp;hvrand=132073312680425130&amp;hvtargid=kwd-415525993911&amp;hydadcr=27927_1978089&amp;keywords=kuman+5+inch&amp;qid=1636547493&amp;qsid=262-3631401-7484166&amp;sr=8-1&amp;sres=B07M8QFKHK%2CB07MBD6TTP%2CB07ZD4QGQJ%2CB081YQH7KQ%2CB07PG8XY3Y%2CB07JKZBG8H%2CB013JECYF2%2CB07YCBWRQP%2CB07QG87P9D%2CB07KJBCNS8%2CB071Y3NWCK%2CB087GFY4KL%2CB07H79XMLT%2CB07K6GHJFH%2CB07QJ8YQPX%2CB08B67KJ75&amp;srpt=MONITOR" data-type="URL" data-id="https://www.amazon.de/Kuman-Resistive-Protective-Touchscreen-Bildschirm/dp/B07M8QFKHK/ref=sr_1_1?adgrpid=69069141257&amp;gclid=Cj0KCQiA-K2MBhC-ARIsAMtLKRtOy-l56cnGXyybLLshoDY-CNH60KyfYNzADLuFdmFIISiI_7-h3bIaAqtsEALw_wcB&amp;hvadid=391628797118&amp;hvdev=c&amp;hvlocphy=9041871&amp;hvnetw=g&amp;hvqmt=e&amp;hvrand=132073312680425130&amp;hvtargid=kwd-415525993911&amp;hydadcr=27927_1978089&amp;keywords=kuman+5+inch&amp;qid=1636547493&amp;qsid=262-3631401-7484166&amp;sr=8-1&amp;sres=B07M8QFKHK%2CB07MBD6TTP%2CB07ZD4QGQJ%2CB081YQH7KQ%2CB07PG8XY3Y%2CB07JKZBG8H%2CB013JECYF2%2CB07YCBWRQP%2CB07QG87P9D%2CB07KJBCNS8%2CB071Y3NWCK%2CB087GFY4KL%2CB07H79XMLT%2CB07K6GHJFH%2CB07QJ8YQPX%2CB08B67KJ75&amp;srpt=MONITOR">Kuman For Raspberry Pi display 5 inch Resistive Touch </a><a href="https://www.amazon.de/Kuman-Resistive-Protective-Touchscreen-Bildschirm/dp/B07M8QFKHK/ref=sr_1_1?adgrpid=69069141257&amp;gclid=Cj0KCQiA-K2MBhC-ARIsAMtLKRtOy-l56cnGXyybLLshoDY-CNH60KyfYNzADLuFdmFIISiI_7-h3bIaAqtsEALw_wcB&amp;hvadid=391628797118&amp;hvdev=c&amp;hvlocphy=9041871&amp;hvnetw=g&amp;hvqmt=e&amp;hvrand=132073312680425130&amp;hvtargid=kwd-415525993911&amp;hydadcr=27927_1978089&amp;keywords=kuman+5+inch&amp;qid=1636547493&amp;qsid=262-3631401-7484166&amp;sr=8-1&amp;sres=B07M8QFKHK%2CB07MBD6TTP%2CB07ZD4QGQJ%2CB081YQH7KQ%2CB07PG8XY3Y%2CB07JKZBG8H%2CB013JECYF2%2CB07YCBWRQP%2CB07QG87P9D%2CB07KJBCNS8%2CB071Y3NWCK%2CB087GFY4KL%2CB07H79XMLT%2CB07K6GHJFH%2CB07QJ8YQPX%2CB08B67KJ75&amp;srpt=MONITOR" target="_blank" data-type="URL" data-id="https://www.amazon.de/Kuman-Resistive-Protective-Touchscreen-Bildschirm/dp/B07M8QFKHK/ref=sr_1_1?adgrpid=69069141257&amp;gclid=Cj0KCQiA-K2MBhC-ARIsAMtLKRtOy-l56cnGXyybLLshoDY-CNH60KyfYNzADLuFdmFIISiI_7-h3bIaAqtsEALw_wcB&amp;hvadid=391628797118&amp;hvdev=c&amp;hvlocphy=9041871&amp;hvnetw=g&amp;hvqmt=e&amp;hvrand=132073312680425130&amp;hvtargid=kwd-415525993911&amp;hydadcr=27927_1978089&amp;keywords=kuman+5+inch&amp;qid=1636547493&amp;qsid=262-3631401-7484166&amp;sr=8-1&amp;sres=B07M8QFKHK%2CB07MBD6TTP%2CB07ZD4QGQJ%2CB081YQH7KQ%2CB07PG8XY3Y%2CB07JKZBG8H%2CB013JECYF2%2CB07YCBWRQP%2CB07QG87P9D%2CB07KJBCNS8%2CB071Y3NWCK%2CB087GFY4KL%2CB07H79XMLT%2CB07K6GHJFH%2CB07QJ8YQPX%2CB08B67KJ75&amp;srpt=MONITOR" rel="noreferrer noopener">Screen</a></li>
<li>3D Printer for printing case</li>
<li><a href="https://www.amazon.de/NorthPada-Raspberry-Netzteil-Schalter-Kontrollleuchte/dp/B07W5H9LQJ/ref=sr_1_1_sspa?__mk_de_DE=ÅMÅŽÕÑ&amp;keywords=Netzteil+USB+micro&amp;qid=1636547669&amp;sr=8-1-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEzT1M5SE5aVjdQNkRKJmVuY3J5cHRlZElkPUEwODgyNDE0MURaMk8wMEM5VkJaNCZlbmNyeXB0ZWRBZElkPUEwMzIzMzkySTQ2Qjg0RzNIR0VWJndpZGdldE5hbWU9c3BfYXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" target="_blank" data-type="URL" data-id="https://www.amazon.de/NorthPada-Raspberry-Netzteil-Schalter-Kontrollleuchte/dp/B07W5H9LQJ/ref=sr_1_1_sspa?__mk_de_DE=ÅMÅŽÕÑ&amp;keywords=Netzteil+USB+micro&amp;qid=1636547669&amp;sr=8-1-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUEzT1M5SE5aVjdQNkRKJmVuY3J5cHRlZElkPUEwODgyNDE0MURaMk8wMEM5VkJaNCZlbmNyeXB0ZWRBZElkPUEwMzIzMzkySTQ2Qjg0RzNIR0VWJndpZGdldE5hbWU9c3BfYXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==" rel="noreferrer noopener">USB C power supply</a> ( min 2.5A )</li>
</ul>
<p><!-- /wp:list --></p>
<p><!-- wp:heading --></p>
<h2><strong>Required software</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:list --></p>
<ul>
<li><a href="https://www.raspberrypi.com/software/operating-systems/" target="_blank" data-type="URL" data-id="https://www.raspberrypi.com/software/operating-systems/" rel="noreferrer noopener">Raspberry Pi OS with desktop</a></li>
<li>PrusaSlicer or Cura for 3D Printer </li>
<li>SD Formatter</li>
<li>BelenaEtcher</li>
</ul>
<p><!-- /wp:list --></p>
<p><!-- wp:heading --></p>
<h2><strong>3D printer housing</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:media-text {"mediaId":743,"mediaLink":"https://affengriff.net/?attachment_id=743","mediaType":"image","mediaWidth":34} --></p>
<div class="wp-block-media-text alignwide is-stacked-on-mobile" style="grid-template-columns:34% auto">
<figure class="wp-block-media-text__media"><img src="{{ site.baseurl }}/assets/2021/11/Bildschirmfoto-2021-11-10-um-13.43.44.png" alt="Home Assistant 3D Print" class="wp-image-743 size-full" /></figure>
<div class="wp-block-media-text__content"><!-- wp:paragraph {"placeholder":"Content…","fontSize":"normal"} --></p>
<p class="has-normal-font-size">This is my first draft of a 3D printer case based on an existing project from <a href="https://www.thingiverse.com/thing:2871564" target="_blank" data-type="URL" data-id="https://www.thingiverse.com/thing:2871564" rel="noreferrer noopener">Thingiverse</a>. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"placeholder":"Content…","fontSize":"normal"} --></p>
<p class="has-normal-font-size">I'm still trying to find time to familiarize myself with <a href="http://openscad.org" target="_blank" data-type="URL" data-id="http://openscad.org" rel="noreferrer noopener">OpenSCAD</a>. At the moment I am creating new or working on existing projects with the help of <a href="https://www.tinkercad.com/" target="_blank" data-type="URL" data-id="https://www.tinkercad.com/" rel="noreferrer noopener">Tinkercad</a>. I am currently assuming that it will take longer to become familiar with OpenSCAD in order to design complex models.</p>
<p><!-- /wp:paragraph --></div>
</div>
<p><!-- /wp:media-text --></p>
<p><!-- wp:heading --></p>
<h2><strong>Software setup of Raspberry Pi OS</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>The first steps on how to get a Raspberry Pi OS image on an SD card can be found quickly via google. I use the SD formatter to format the SD card and the BelenaEtcher program to write the image onto the SD card. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>After the image has been flashed on the SD card, the standard settings in the Linux operating system are configured such as network, language, keyboard layout, etc. Then you will be asked whether the Linux system should be brought up to date.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>The 5 inch display will probably already work with the Raspberry Pi 3, but without the touch screen function. The correct drivers have to be installed for this to work. Here are the steps that need to be taken in order for the touchscreen to function properly:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:list {"ordered":true} --></p>
<ol>
<li>Install <a href="https://www.raspberrypi.org/downloads/" target="_blank" data-type="URL" data-id="https://www.raspberrypi.org/downloads/" rel="noreferrer noopener">Raspberry Pi OS official mirror </a></li>
<li>Clone repo from GitHub to your pi
<ul>
<li><em>sudo rm -rf LCD-show</em></li>
<li><em>git clone https://github.com/goodtft/LCD-show.git</em></li>
<li><em>chmod -R 755 LCD-show</em></li>
<li><em>cd LCD-show/</em></li>
</ul>
</li>
<li>Step3, According to your LCD’s type, excute:
<ul>
<li>In case of 5″ LCD
<ul>
<li><em>sudo ./LCD5-show</em></li>
</ul>
</li>
<li>If you need to switch back to the traditional HDMI display
<ul>
<li><em>sudo ./LCD-hdmi</em></li>
</ul>
</li>
</ul>
</li>
<li>Wait a few minutes,the system will restart automatically, enjoy with your LCD</li>
<li>Rotate LCD display
<ul>
<li><em>./rotate.sh 270</em></li>
</ul>
</li>
</ol>
<p><!-- /wp:list --></p>
<p><!-- wp:paragraph --></p>
<p>Since the display is now running and rotated with the correct drivers, we can focus on the Chrome Kiosk mode. For this I found another <a href="https://www.stoffl.info/2020/03/25/how-to-raspberry-pi-chromium-kiosk-mode-autostart-und-vollbildmodus/" target="_blank" data-type="URL" data-id="https://www.stoffl.info/2020/03/25/how-to-raspberry-pi-chromium-kiosk-mode-autostart-und-vollbildmodus/" rel="noreferrer noopener">blog</a> that describes these steps really well and in great detail. Therefore I will save myself a new description. Here is an example code for the auto start:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code lang="bash" class="language-bash"># Mauszeiger Ausblenden
@unclutter

# Bildschirmschoner ausschalten
#@xscreensaver -no-splash  
@xset s off
@xset -dpms
@xset s noblank

# Startet im Vollbild und im Inkognito Modus, ohne Adressleiste und Knöpfe und ohne die Möglichkeit den Vollbildmodus mit F11 zu deaktivieren 
@chromium-browser --incognito --disable-notifications --kiosk http://homeassistant.local:8123/lovelace/0

# Oder (dementsprechend aus kommentieren) 

# Startet im Vollbildmodus, ohne Adressleiste und Knöpfe und im Inkognito Modus.
#@chromium-browser --incognito --start-fullscreen http://homeassistant.local:8123/lovelace/0


 </code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading --></p>
<h2><strong>Software setup Home Assistant</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>After the repeated failure of Chrome to persistently write the login data for Home Assistant, I came across a page that says this is wanted. The only remedy is to specify the Raspberry Pi's IP address as a trusted network under /config/configuration.yaml. Here is a code snipped of my configuration.yaml:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code lang="bash" class="language-bash"># Beginning of configuration.yaml
homeassistant:
  name: homeAssistant
  auth_providers:
    - type: trusted_networks
      trusted_networks:
        - 192.168.178.XX
        - 127.0.0.1
        - ::1
      allow_bypass_login: true
    - type: homeassistant

# Configure a default setup of Home Assistant
...
...</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading --></p>
<h2><strong>Ready to start</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Now everything should start automatically after the power supply is plugged in. If this is not the case, I have probably forgotten something in my description. If so, drop me a line.</p>
<p><!-- /wp:paragraph --></p>
