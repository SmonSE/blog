---
layout: post
title: SmartMirror - Home Assistant
date: 2022-01-15 22:28:22.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Blog
- HomeAssistant
tags:
- Chromium
- DIY
- HomeAssistant
- Kiosk Mode
- MirrorOS
- RaspberryPi3
- SmartMirror
meta:
  rank_math_seo_score: '86'
  _edit_last: '1'
  _ez-toc-disabled: ''
  _ez-toc-insert: ''
  _ez-toc-heading-levels: a:0:{}
  _ez-toc-alttext: ''
  _ez-toc-exclude: ''
  rank_math_internal_links_processed: '1'
  rank_math_focus_keyword: SmartMirror
  rank_math_primary_category: '13'
  rank_math_og_content_image: a:2:{s:5:"check";s:32:"daea2ef284f777f0f65a3525d1d68d10";s:6:"images";a:1:{i:0;i:826;}}
author:
  login: smon
  email: simon_eisele@web.de
  display_name: Simon Eisele
  first_name: Simon
  last_name: Eisele
permalink: "/2022/01/15/smartmirror-home-assistant/"
---
<p><!-- wp:paragraph --></p>
<p>vor längerer Zeit habe ich mir einen SmartMirror für das Betriebssystem <a href="https://glancr.de/mirr-os/" target="_blank" rel="noreferrer noopener">MirrorOs</a> von der Firma Glancr gebaut. Das Einrichten des Betriebssystem ist für jeden Einsteiger in das Thema SmartMirror der auch nicht viel Software Kenntnisse hat genau das richtige. Vor allem die das <a href="https://glancr.de/smart-mirror-selbst-bauen/" target="_blank" data-type="URL" data-id="https://glancr.de/smart-mirror-selbst-bauen/" rel="noreferrer noopener">Video</a> und die Tipps für den Bau des Spiegels waren sehr hilfreich. Mit der Zeit ist mir das ganze aber zu langweilig geworden nur Termine, Tankpreise, Wetter, Uhrzeit, etc. anzeigen zu lassen. Da ich im letzten Jahr viel mit HomeAssistant gearbeitet und einige Sensoren im Haus am laufen habe, fand ich die Idee meinen HomeAssistant Lovelace auf dem SmartMirror anzeigen zu lassen ziemlich cool.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2 id="bau-des-smartmirror"><strong>Bau des SmartMirro</strong>r</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:media-text {"mediaId":826,"mediaLink":"https://affengriff.net/?attachment_id=826#main","mediaType":"image","mediaWidth":35} --></p>
<div class="wp-block-media-text alignwide is-stacked-on-mobile" style="grid-template-columns:35% auto">
<figure class="wp-block-media-text__media"><img src="{{ site.baseurl }}/assets/2022/01/IMG_9344.jpg" alt="SmartMirror Innenleben<br />
" class="wp-image-826 size-full" /></figure>
<div class="wp-block-media-text__content"><!-- wp:list --></p>
<ul id="block-d7984102-0e97-4258-aec9-e3d8e677b526">
<li>Raspberry Pi 3</li>
<li>Netzteil (sehr schmal)</li>
<li>Flachbildschirm oder alter Monitor</li>
<li><a href="https://www.amazon.de/AmazonBasics-7T9MV4-Verbindungskabel-Stecker-Micro-USB-B-Stecker/dp/B0711PVX6Z/ref=sr_1_2?__mk_de_DE=ÅMÅŽÕÑ&amp;crid=1I7P3E4HGIDSJ&amp;keywords=usb%2Busb%2Bmicro&amp;qid=1642277670&amp;sprefix=usb%2Busb%2Bmicro%2Caps%2C75&amp;sr=8-2&amp;th=1" target="_blank" data-type="URL" data-id="https://www.amazon.de/AmazonBasics-7T9MV4-Verbindungskabel-Stecker-Micro-USB-B-Stecker/dp/B0711PVX6Z/ref=sr_1_2?__mk_de_DE=ÅMÅŽÕÑ&amp;crid=1I7P3E4HGIDSJ&amp;keywords=usb%2Busb%2Bmicro&amp;qid=1642277670&amp;sprefix=usb%2Busb%2Bmicro%2Caps%2C75&amp;sr=8-2&amp;th=1" rel="noreferrer noopener">USB-A auf Micro-USB-B-Stecker</a></li>
<li><a href="https://www.amazon.de/AmazonBasics-PBH-48914-Hochgeschwindigkeits-HDMI-Kabel-Ethernet-4K-Videowiedergabe-schwarz/dp/B01D5H93FW/ref=sr_1_1_sspa?keywords=hdmi+kabel&amp;qid=1642277637&amp;sr=8-1-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExTzhJQkJRMzVVS1JKJmVuY3J5cHRlZElkPUEwOTczNTUyM0hLUVgwMjBUSkRXRyZlbmNyeXB0ZWRBZElkPUEwMTY5Mjg0M0ZSUjZOTjA5RTNMMSZ3aWRnZXROYW1lPXNwX2F0ZiZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU=" target="_blank" data-type="URL" data-id="https://www.amazon.de/AmazonBasics-PBH-48914-Hochgeschwindigkeits-HDMI-Kabel-Ethernet-4K-Videowiedergabe-schwarz/dp/B01D5H93FW/ref=sr_1_1_sspa?keywords=hdmi+kabel&amp;qid=1642277637&amp;sr=8-1-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExTzhJQkJRMzVVS1JKJmVuY3J5cHRlZElkPUEwOTczNTUyM0hLUVgwMjBUSkRXRyZlbmNyeXB0ZWRBZElkPUEwMTY5Mjg0M0ZSUjZOTjA5RTNMMSZ3aWRnZXROYW1lPXNwX2F0ZiZhY3Rpb249Y2xpY2tSZWRpcmVjdCZkb05vdExvZ0NsaWNrPXRydWU=" rel="noreferrer noopener">HDMI Kabel</a></li>
<li><a href="https://framago.de/leinwandrahmen" target="_blank" rel="noreferrer noopener">Leinwand Keilrahmen (nach Maß)</a></li>
<li><a href="https://www.hornbach.de/shop/Fixmass-Duenn-MDF-Platte-einseitig-schwarz-1200x600x3-mm/6617871/artikel.html" target="_blank" rel="noreferrer noopener">Fixmaß Dünn-MDF Platte schwarz</a></li>
<li><a href="https://www.amazon.de/dp/B08F54YGC9/ref=redir_mobile_desktop?_encoding=UTF8&amp;aaxitk=c1e42be31b2b30dbfcfb223bf5c115ce&amp;hsa_cr_id=2697979200102&amp;pd_rd_plhdr=t&amp;pd_rd_r=b4e9ae5a-4af5-4c15-aa32-3e195d64c9cc&amp;pd_rd_w=mRG3x&amp;pd_rd_wg=gOclq&amp;ref_=sbx_be_s_sparkle_mcd_asin_2_img" target="_blank" data-type="URL" data-id="https://www.amazon.de/dp/B08F54YGC9/ref=redir_mobile_desktop?_encoding=UTF8&amp;aaxitk=c1e42be31b2b30dbfcfb223bf5c115ce&amp;hsa_cr_id=2697979200102&amp;pd_rd_plhdr=t&amp;pd_rd_r=b4e9ae5a-4af5-4c15-aa32-3e195d64c9cc&amp;pd_rd_w=mRG3x&amp;pd_rd_wg=gOclq&amp;ref_=sbx_be_s_sparkle_mcd_asin_2_img" rel="noreferrer noopener">Magnetleisten für Spiegelglas</a></li>
<li><a href="https://www.amazon.de/Halterungsset-Klebe-Magnete-Stahl-Plättchen-Klebestücke-Fernbedienungen/dp/B08P53RWZD/ref=sr_1_8?__mk_de_DE=ÅMÅŽÕÑ&amp;crid=2446RYQHNM9QZ&amp;keywords=stahlplättchen&amp;qid=1642277530&amp;s=diy&amp;sprefix=stahlblättchen%2Cdiy%2C71&amp;sr=1-8" target="_blank" data-type="URL" data-id="https://www.amazon.de/Halterungsset-Klebe-Magnete-Stahl-Plättchen-Klebestücke-Fernbedienungen/dp/B08P53RWZD/ref=sr_1_8?__mk_de_DE=ÅMÅŽÕÑ&amp;crid=2446RYQHNM9QZ&amp;keywords=stahlplättchen&amp;qid=1642277530&amp;s=diy&amp;sprefix=stahlblättchen%2Cdiy%2C71&amp;sr=1-8" rel="noreferrer noopener">Stahlblättchen für an Spiegelglas</a></li>
<li>Holzleisten</li>
<li>Schrauben</li>
<li><a href="https://www.glas-star.de/collections/mirropane-chrome-spy" target="_blank" data-type="URL" data-id="https://www.glas-star.de/collections/mirropane-chrome-spy" rel="noreferrer noopener">Spionspiegel auf Maß bestellt</a></li>
</ul>
<p><!-- /wp:list --></div>
</div>
<p><!-- /wp:media-text --></p>
<p><!-- wp:media-text {"mediaId":827,"mediaLink":"https://affengriff.net/?attachment_id=827#main","mediaType":"image","mediaWidth":35} --></p>
<div class="wp-block-media-text alignwide is-stacked-on-mobile" style="grid-template-columns:35% auto">
<figure class="wp-block-media-text__media"><img src="{{ site.baseurl }}/assets/2022/01/IMG_9349.jpg" alt="SmartMirror fertig" class="wp-image-827 size-full" /></figure>
<div class="wp-block-media-text__content"><!-- wp:paragraph {"placeholder":"Content…"} --></p>
<p>So sieht mein fertiger SmarMirror aus. Ich habe mir damals eine Steckdose für hinter den Spiegel installieren lassen die über den unteren rechten Schalter geschalten wird.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Der Spionspiegel ist mit Magneten im Rahmen befestigt wodurch ich ihn jederzeit herausnehmen kann. Das Spionspiegelglas sollte auf der Rückseite mit schwarzer Folie abgelebt werden bis auf den Teil wo der Monitor sitzt. Ansonsten kann es sein das man ein wenig durchsehen kann. </p>
<p><!-- /wp:paragraph --></div>
</div>
<p><!-- /wp:media-text --></p>
<p><!-- wp:heading --></p>
<h2 id="bildergalerie"><strong>Bildergalerie</strong> </h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:gallery {"linkTo":"none"} --></p>
<figure class="wp-block-gallery has-nested-images columns-default is-cropped"><!-- wp:image {"id":839,"sizeSlug":"large","linkDestination":"none"} --></p>
<figure class="wp-block-image size-large"><img src="{{ site.baseurl }}/assets/2022/01/IMG_9343.jpg" alt="" class="wp-image-839" /></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:image {"id":840,"sizeSlug":"large","linkDestination":"none"} --></p>
<figure class="wp-block-image size-large"><img src="{{ site.baseurl }}/assets/2022/01/IMG_9345.jpg" alt="" class="wp-image-840" /></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:image {"id":841,"sizeSlug":"large","linkDestination":"none"} --></p>
<figure class="wp-block-image size-large"><img src="{{ site.baseurl }}/assets/2022/01/IMG_9347.jpg" alt="" class="wp-image-841" /></figure>
<p><!-- /wp:image --></figure>
<p><!-- /wp:gallery --></p>
<p><!-- wp:heading --></p>
<h2 id="benotigte-software"><strong>Benötigte Software</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:list --></p>
<ul>
<li><a href="https://www.raspberrypi.com/software/" target="_blank" data-type="URL" data-id="https://www.raspberrypi.com/software/" rel="noreferrer noopener">Raspberry Pi OS</a> für HomeAssitant</li>
<li>oder <a href="http://glancr.de/mirr-os/" target="_blank" data-type="URL" data-id="glancr.de/mirr-os/" rel="noreferrer noopener">Mirror OS</a> von Glancr</li>
</ul>
<p><!-- /wp:list --></p>
<p><!-- wp:heading --></p>
<h2 id="raspberry-pi-os-anpassung"><strong>Raspberry Pi OS Anpassung</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Damit der Raspberry Pi mit der gewünschten HTML aufstartet benötigt man den Chromium Kiosk Modus. Da wir die Einstellungen unter Raspberry Pi OS vornehmen ist Chromium bereits vorinstalliert. Dadurch benötigen wir nur noch die Software Unclutter um den Mauszeiger ausblenden zu können.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code lang="bash" class="language-bash">sudo apt-get update 
sudo apt-get install unclutter</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:paragraph --></p>
<p>Als nächstes richten wir den Autostart von Chromium ein. Hierfür öffnen wir folgende Datei:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code lang="bash" class="language-bash">/home/pi/.config/lxsession/LXDE-pi/autostart

oder

sudo nano /etc/xdg/lxsession/LXDE-pi/autostart</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:paragraph --></p>
<p>Hier muss jetzt folgendes stehen:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code lang="bash" class="language-bash"># Mauszeiger Ausblenden
@unclutter

# Bildschirmschoner deaktivieren
#@xscreensaver -no-splash  
@xset s off
@xset -dpms
@xset s noblank

# Startet im Vollbild und im Inkognito Modus, ohne Adressleiste und Knöpfe und ohne die Möglichkeit den Vollbildmodus mit F11 zu deaktivieren 
@chromium-browser --incognito --disable-notifications --kiosk http://homeassistant.local:8123/lovelace/0
</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading --></p>
<h2 id="hassio-anpassung-an-smartmirror"><strong>Hassio Anpassung an SmartMirror</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Nach dem wiederholten Scheitern von Chrome, die <a href="https://affengriff.net/2021/11/10/home-assistant-station/" target="_blank" data-type="URL" data-id="https://affengriff.net/2021/11/10/home-assistant-station/" rel="noreferrer noopener">Anmeldedaten für Home Assistant</a> dauerhaft zu schreiben, bin ich auf eine Seite gestoßen, auf der steht, dass dies gewollt ist. Abhilfe schafft nur, die IP-Adresse des Raspberry Pi als vertrauenswürdiges Netzwerk unter /config/configuration.yaml anzugeben. Hier ist ein Codeausschnitt meiner configuration.yaml:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code lang="bash" class="language-bash"># Beginning of configuration.yaml
homeassistant:
  name: homeAssistant
  auth_providers:
    - type: trusted_networks
      trusted_networks:
        - 192.168.178.XX
        - 127.0.0.1
        - ::1
      allow_bypass_login: true
    - type: homeassistant

# Configure a default setup of Home Assistant
...
...
</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading --></p>
<h2 id="home-assistant-lovelace"><strong>Home Assistant Lovelace</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:media-text {"mediaId":843,"mediaLink":"https://affengriff.net/?attachment_id=843#main","mediaType":"image","mediaWidth":40} --></p>
<div class="wp-block-media-text alignwide is-stacked-on-mobile" style="grid-template-columns:40% auto">
<figure class="wp-block-media-text__media"><img src="{{ site.baseurl }}/assets/2022/01/Bildschirmfoto-2022-01-15-um-22.21.51-1-668x1024.png" alt="" class="wp-image-843 size-full" /></figure>
<div class="wp-block-media-text__content"><!-- wp:paragraph {"placeholder":"Content…"} --></p>
<p>Die Darstellung der Benutzeroberfläche kann mittels individuellem <a href="https://www.home-assistant.io/lovelace/" target="_blank" data-type="URL" data-id="https://www.home-assistant.io/lovelace/" rel="noreferrer noopener">Hassio Lovelace</a> angepasst werden. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Hier können alle möglichen und zur verfügung stehenden Entitäten angezeigt werden. </p>
<p><!-- /wp:paragraph --></div>
</div>
<p><!-- /wp:media-text --></p>
