---
layout: post
title: ESP8266 - IKEA VINDRIKTNING Luftqualitätssensor
date: 2022-02-13 22:07:06.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Blog
- HomeAssistant
tags:
- ESP8266
- Ikea
- Ikea Vindriktning
- Luftqualitätssensor
- WeMosD1
meta:
  rank_math_seo_score: '90'
  rank_math_primary_category: '13'
  _edit_last: '1'
  _ez-toc-disabled: ''
  _ez-toc-insert: ''
  _ez-toc-heading-levels: a:0:{}
  _ez-toc-alttext: ''
  _ez-toc-exclude: ''
  rank_math_internal_links_processed: '1'
  rank_math_focus_keyword: VINDRIKTNING
  rank_math_og_content_image: a:2:{s:5:"check";s:32:"9adafaea22fdb5224ca820ee0821ca79";s:6:"images";a:1:{i:0;s:71:"https://affengriff.net/wp-content/uploads/2022/02/IMG_9565-768x1024.jpg";}}
author:
  login: smon
  email: simon_eisele@web.de
  display_name: Simon Eisele
  first_name: Simon
  last_name: Eisele
permalink: "/2022/02/13/esp8266-ikea-vindriktning/"
---
<p><!-- wp:paragraph --></p>
<p>Zu dem Luftqualitätssensor von Ikea (Vindriktning) mittels ESP8266 findet man einige Anleitungen im Netz. Für die Vollständigkeit meiner Dokumentationen, werde ich trotzdem von meinem Umbau des Ikea Vindriktning Sensors berichten. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2 id="benotigte-hardware"><strong>Benötigte Hardware</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:list --></p>
<ul>
<li><a href="https://www.amazon.de/AZDelivery-ESP8266-ESP-8266EX-Entwicklung-inklusive/dp/B08BTXCZC1/ref=sr_1_2_sspa?__mk_de_DE=ÅMÅŽÕÑ&amp;crid=3P4D055YFXIAG&amp;keywords=Memos%2Bd1%2Bmini&amp;qid=1644400539&amp;sprefix=memos%2Bd1%2Bmini%2Caps%2C82&amp;sr=8-2-spons&amp;smid=A1X7QLRQH87QA3&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUE3TFNNMVJCU0tDMzQmZW5jcnlwdGVkSWQ9QTAwNTk4ODQxRzc2UkIzQ1NVR002JmVuY3J5cHRlZEFkSWQ9QTA2NzY4MjIxM0tSRFZaTEFVNVdUJndpZGdldE5hbWU9c3BfYXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ&amp;th=1" target="_blank" rel="noreferrer noopener">ESP8266</a> ( WeMos D1 )</li>
<li>Einzeladern</li>
<li><a href="https://www.ikea.com/de/de/p/vindriktning-luftqualitaetssensor-70498242/" data-type="URL" data-id="https://www.ikea.com/de/de/p/vindriktning-luftqualitaetssensor-70498242/" target="_blank" rel="noreferrer noopener">Ikea Vindriktning</a></li>
<li>Lötkolben + Lötzinn</li>
<li>Heißklebepistole </li>
</ul>
<p><!-- /wp:list --></p>
<p><!-- wp:heading --></p>
<h2 id="benotigte-software"><strong>Benötigte Software</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:list --></p>
<ul>
<li><a href="https://www.home-assistant.io/getting-started/" target="_blank" rel="noreferrer noopener">Home Assistant</a></li>
<li><a href="https://esphome.io" target="_blank" rel="noreferrer noopener">ESP Home</a></li>
</ul>
<p><!-- /wp:list --></p>
<p><!-- wp:heading --></p>
<h2 id="aufbau"><strong>Aufbau</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:gallery {"linkTo":"none"} --></p>
<figure class="wp-block-gallery has-nested-images columns-default is-cropped"><!-- wp:image {"id":936,"sizeSlug":"large","linkDestination":"none"} --></p>
<figure class="wp-block-image size-large"><img src="{{ site.baseurl }}/assets/2022/02/IMG_9565-768x1024.jpg" alt="WeMos D1" class="wp-image-936" /></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:image {"id":937,"sizeSlug":"large","linkDestination":"none"} --></p>
<figure class="wp-block-image size-large"><img src="{{ site.baseurl }}/assets/2022/02/IMG_9566-768x1024.jpg" alt="Ikea Vindriktning<br />
" class="wp-image-937" /></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:image {"id":938,"sizeSlug":"large","linkDestination":"none"} --></p>
<figure class="wp-block-image size-large"><img src="{{ site.baseurl }}/assets/2022/02/IMG_9568-768x1024.jpg" alt="Ikea VINDRIKTNING" class="wp-image-938" /></figure>
<p><!-- /wp:image --></figure>
<p><!-- /wp:gallery --></p>
<p><!-- wp:heading --></p>
<h2 id="anschlussplan"><strong>Anschlussplan</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Bei mir waren die Lötpads am Ikea Sensor bereits verzinnt was das anlöten einfacher macht. Zu beachten ist das der Lötkolben nicht zu heiß eingestellt ist. Ich habe meinen Lötkolben auf ca. 330°c eingestellt. Dadurch sollte ein zu heiß werden und ablösen der Lötpads verhindert werden.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:list --></p>
<ul>
<li>WeMos 5V ----> + Vindriktning</li>
<li>WeMos GND -> – Vindriktning</li>
<li>WeMos D3 ----> REST Vindriktning</li>
</ul>
<p><!-- /wp:list --></p>
<p><!-- wp:paragraph --></p>
<p>Nach dem anlöten der Einzelandern habe ich die WeMos D1 Platine mit einem Streifen Heißkleber im unteren Bereich fixiert. Im falls das man den WeMos erneut flashen muss hat so einen schnellen Zugriff an den USB Port. Rechts habe ich eine kleine Ecke von dem Kunststoff abgeknipst damit das Kabel besser nach oben durchgeführt werden kann.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2 id="esp-home-sensor-config-yaml"><strong>ESP Home Sensor config.yaml</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code lang="yaml" class="language-yaml">esphome:
  name: airquality

esp8266:
  board: d1_mini  

# Example configuration entry
uart:
  rx_pin: D3
  baud_rate: 9600

sensor:
  - platform: pm1006
    pm_2_5:
      name: "Airquality 2.5µm:"  

# Enable logging
logger:

# Enable Home Assistant API
api:

ota:
  password: "xxxxxxxxxxxxxxxxxxxxxxx"

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Airquality Fallback Hotspot"
    password: "xxxxxxxxxxxxx"

captive_portal:
</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading --></p>
<h2 id="home-assistant-grafische-darstellung"><strong>Home Assistant grafische Darstellung</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:image {"id":941,"sizeSlug":"large","linkDestination":"none"} --></p>
<figure class="wp-block-image size-large"><img src="{{ site.baseurl }}/assets/2022/02/Bildschirmfoto-2022-02-13-um-21.44.38-1024x364.png" alt="" class="wp-image-941" /></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:code --></p>
<pre class="wp-block-code"><code class="">type: gauge
min: 0
max: 120
entity: sensor.airquality_2_5um
severity:
  green: 0
  yellow: 36
  red: 86
needle: true</code></pre>
<p><!-- /wp:code --></p>
<p><!-- wp:heading --></p>
<h2 id="fazit-zum-sensor"><strong>Fazit zum Sensor</strong></h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Wenn man sich die Platine genauer anschaut wird Ikea bald eine Variante mit einem Zigbee Modul herausbringen. Im oberen Bereich der Platine sind Anschlüsse für einen Stecker vorgesehen um ein Zigbee Modul anzuschließen.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Was mich leider ein wenig stört, ist der etwas brummende Lüfter des Moduls, der alle 20 Sekunden anfängt zu laufen (für die Messung). Ich bin aktuell am überlegen ob ich den Lüfter an die 3V des WeMos D1 anklemmen soll. Allerdings weiß ich dann nicht ob dadurch das Messergebnis verfälscht wird. Vielleicht fällt mir ja noch eine andere Lösung ein das leichte Brummen des Lüfters zu minimieren. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Mir gefällt die Gaube Darstellung für die Luftqualität in meinem <a href="https://affengriff.net/2022/01/15/smartmirror-home-assistant/" target="_blank" rel="noreferrer noopener">Smart Mirror</a>.</p>
<p><!-- /wp:paragraph --></p>
